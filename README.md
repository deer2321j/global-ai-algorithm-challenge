# ğŸ“š åŸºäºä»²è£å¼åŒå±‚é›†æˆçš„æ™ºèƒ½å€Ÿé˜…æ¨èç³»ç»Ÿ
# (Arbitration-based Two-Layer Ensemble Recommendation System)

![Python](https://img.shields.io/badge/Python-3.8%2B-blue?style=for-the-badge&logo=python)
![Architecture](https://img.shields.io/badge/Arch-ResNet--Inspired-purple?style=for-the-badge)
![Strategy](https://img.shields.io/badge/Strategy-Weighted%20Arbitration-red?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-Production%20Ready-success?style=for-the-badge)

> ğŸ† **å†³èµ›æ ¸å¿ƒæ–¹æ¡ˆ**: æœ¬é¡¹ç›®é’ˆå¯¹è·¨æ¨¡æ€æ•°æ®èåˆã€ç”¨æˆ·å†·å¯åŠ¨åŠå¤šæ¨¡å‹é›†æˆä¸­â€œæ¦‚ç‡åˆ†å¸ƒä¸ä¸€è‡´â€çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼Œåˆ›æ–°æ€§åœ°æå‡ºäº†**â€œåŠ æƒæŠ•ç¥¨ä¸ºä¸»ã€é¡ºåºä»²è£ä¸ºè¾…â€**çš„åŒå±‚é›†æˆæ¡†æ¶ã€‚ç³»ç»Ÿå¼•å…¥ **ResNet æ®‹å·®æ€æƒ³** è§£å†³é›†æˆé€€åŒ–é—®é¢˜ï¼Œåº•å±‚ç»“åˆ **BERT** ä¸ **GAT** æ·±åº¦æŒ–æ˜å›¾æ–‡ç‰¹å¾ï¼Œæœ€ç»ˆå®ç°é«˜ç²¾åº¦çš„å›¾ä¹¦å€Ÿé˜…æ¨èã€‚

---

## ğŸ“– ç›®å½• (Table of Contents)

- [æ ¸å¿ƒåˆ›æ–° (Key Innovations)](#-æ ¸å¿ƒåˆ›æ–°-key-innovations)
- [ç³»ç»Ÿæ¶æ„ (System Architecture)](#-ç³»ç»Ÿæ¶æ„-system-architecture)
- [æŠ€æœ¯æ·±åº¦è§£æ (Technical Deep Dive)](#-æŠ€æœ¯æ·±åº¦è§£æ-technical-deep-dive)
    - [åŒå±‚é›†æˆæœºåˆ¶ (Two-Layer Ensemble)](#1-åŒå±‚é›†æˆæœºåˆ¶-two-layer-ensemble)
    - [ResNet æ®‹å·®æŠ—é€€åŒ–è®¾è®¡ (ResNet Anti-Degradation)](#2-resnet-æ®‹å·®æŠ—é€€åŒ–è®¾è®¡-resnet-anti-degradation)
    - [å¤šæ¨¡æ€ç‰¹å¾æŒ–æ˜ (Multi-Modal Mining)](#3-å¤šæ¨¡æ€ç‰¹å¾æŒ–æ˜-multi-modal-mining)
- [å¿«é€Ÿå¼€å§‹ (Quick Start)](#-å¿«é€Ÿå¼€å§‹-quick-start)
- [ä»“åº“ç»“æ„ (Repository Layout)](#-ä»“åº“ç»“æ„-repository-layout)
- [å®Œæ•´å¤ç° (Full Reproduction)](#-å®Œæ•´å¤ç°-full-reproduction)
- [æ³¨æ„äº‹é¡¹ (Notes)](#-æ³¨æ„äº‹é¡¹-notes)

---

## âœ¨ æ ¸å¿ƒåˆ›æ–° (Key Innovations)

*   **ğŸ›¡ï¸ åŒå±‚ä»²è£é›†æˆ (Two-Layer Arbitration Ensemble)**
    *   **Layer 1 (é²æ£’æ€§)**: ç²¾è‹±æ¨¡å‹ Top-10 é¢„èåˆï¼Œæ„å»ºé«˜ç½®ä¿¡åº¦åŸºå‡†ã€‚
    *   **Layer 2 (ç²¾ç¡®æ€§)**: å…¨é‡æ¨¡å‹åŠ æƒæŠ•ç¥¨ + **é¡ºåºä»²è£æœºåˆ¶**ï¼Œè§£å†³å¹³ç¥¨ä¸åˆ†å¸ƒå·®å¼‚é—®é¢˜ã€‚
*   **ğŸ§¬ ResNet æ®‹å·®æ€æƒ³ (ResNet-Inspired)**
    *   æ„å»º $H(x) = F(x) + x$ çš„é›†æˆèŒƒå¼ã€‚ä»¥ Layer 1 ç»“æœä¸ºæ’ç­‰æ˜ å°„ ($x$)ï¼ŒLayer 2 ä¸ºæ®‹å·®ä¿®æ­£ ($F(x)$)ï¼Œç¡®ä¿é›†æˆæ•ˆæœ**å•è°ƒä¸å‡**ï¼Œè§£å†³â€œè¶Šé›†æˆè¶Šé€€åŒ–â€çš„æ‚–è®ºã€‚
*   **ğŸ§  å¤šæ¨¡æ€æ·±åº¦æŒ–æ˜ (Deep Multi-Modal Mining)**
    *   å¼•å…¥ **BERT** æå–æ–‡æœ¬è¯­ä¹‰ï¼Œåˆ©ç”¨ **GAT (å›¾æ³¨æ„åŠ›ç½‘ç»œ)** æ•æ‰ç”¨æˆ·-ä¹¦ç±äº¤äº’å›¾ç»“æ„ï¼Œçªç ´ä¼ ç»Ÿç»Ÿè®¡ç‰¹å¾çš„ç“¶é¢ˆã€‚

---

## ğŸ› ï¸ ç³»ç»Ÿæ¶æ„ (System Architecture)

æœ¬æ–¹æ¡ˆé‡‡ç”¨â€œæ¼æ–—å¼â€å†³ç­–æµï¼Œä»åº•å±‚ç‰¹å¾æŒ–æ˜åˆ°ä¸Šå±‚ä»²è£å†³ç­–ï¼Œå±‚å±‚é€’è¿›ï¼š

```mermaid
graph TD
    %% =======================
    %% ğŸ¨ æ ·å¼å®šä¹‰ (Style Definitions)
    %% =======================
    classDef base fill:#f8f9fa,stroke:#adb5bd,stroke-width:1px,color:#212529;
    classDef feature fill:#e3f2fd,stroke:#1e88e5,stroke-width:2px,color:#0d47a1;
    classDef model fill:#e8f5e9,stroke:#43a047,stroke-width:2px,color:#1b5e20;
    classDef l1 fill:#fff3e0,stroke:#fb8c00,stroke-width:2px,color:#e65100,stroke-dasharray: 5 5;
    classDef l2 fill:#fce4ec,stroke:#d81b60,stroke-width:2px,color:#880e4f;
    classDef final fill:#263238,stroke:#263238,stroke-width:3px,color:#fff;

    %% =======================
    %% 1. æ•°æ®ä¸ç‰¹å¾ (Input Phase)
    %% =======================
    subgraph Input ["ğŸ” è¾“å…¥ä¸ç‰¹å¾"]
        Data[("ğŸ“š å¤šæ¨¡æ€æ•°æ®")]:::base
        FE[("âš¡ BERT + GAT ç‰¹å¾")]:::feature
        Data --> FE
    end

    %% =======================
    %% 2. æ¨¡å‹å±‚ (Model Phase)
    %% =======================
    Pool{{"ğŸ§  å·®å¼‚åŒ–æ¨¡å‹é›†ç¾¤"}}:::model
    FE --> Pool

    %% =======================
    %% 3. åŒå±‚é›†æˆ (Ensemble Phase)
    %% =======================
    subgraph Ensemble ["ğŸ›¡ï¸ åŒå±‚ä»²è£é›†æˆ (ResNet-style)"]
        direction TB
        
        %% å·¦è·¯: Layer 1 (åŸºå‡†)
        L1_Node[("Layer 1: Top-10 åŸºå‡† (x)")]:::l1
        
        %% å³è·¯: Layer 2 (ä¿®æ­£)
        L2_Node[("Layer 2: åŠ æƒæŠ•ç¥¨ (F(x))")]:::l2
        
        %% æ ¸å¿ƒä»²è£
        Arbiter{{"âš–ï¸ é¡ºåºä»²è£å™¨"}}:::final
    end

    %% è¿çº¿é€»è¾‘
    Pool -->|ç­›é€‰ç²¾è‹±| L1_Node
    Pool -->|å…¨é‡æ¨¡å‹| L2_Node
    
    L1_Node -->|Shortcut: å…œåº•ä¿éšœ| Arbiter
    L2_Node -->|Main: ç²¾ç¡®ä¿®æ­£| Arbiter

    %% =======================
    %% 4. è¾“å‡º (Output)
    %% =======================
    Result((submission.csv)):::final
    Arbiter --> Result
```

---

## ğŸ” æŠ€æœ¯æ·±åº¦è§£æ (Technical Deep Dive)

### 1. åŒå±‚é›†æˆæœºåˆ¶ (Two-Layer Ensemble)
ä¸ºè§£å†³æ¨¡å‹è¾“å‡ºæ¦‚ç‡åˆ†å¸ƒä¸ä¸€è‡´å’Œå¹³ç¥¨é—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸¥æ ¼çš„åŒå±‚æœºåˆ¶ï¼š

*   **Layer 1ï¼šæ„å»ºé«˜å¯é æ€§åŸºå‡† (Reliable Baseline)**
    *   é‡‡ç”¨â€œ**æ–‡ä»¶å†…æ ‡å‡†åŒ– + è·¨æ–‡ä»¶åŠ¨æ€åŠ æƒ**â€æŠ€æœ¯ã€‚
    *   æ¶ˆé™¤ä¸åŒæ¨¡å‹é‡çº²å·®å¼‚ï¼Œç¡®ä¿ç²¾è‹±æ¨¡å‹ç»“æœåœ¨ç»Ÿä¸€æ ‡å‡†ä¸‹èåˆï¼Œå®ç°è‡ªæ ¡æ­£ã€‚
*   **Layer 2ï¼šå¤šæ¨¡å‹åŠ æƒä»²è£ (Weighted Arbitration)**
    *   è¯»å–æ‰€æœ‰å­æ¨¡å‹ä¸ Layer 1 äº§å‡ºè¿›è¡ŒåŠ æƒæŠ•ç¥¨ã€‚
    *   **ä»²è£æœºåˆ¶**ï¼šå½“å‡ºç°å¾—åˆ†å¹¶åˆ—æ—¶ï¼Œä¸¥æ ¼ä¾æ®**æ¨¡å‹ä¼˜å…ˆçº§ç´¢å¼•**è¿›è¡Œä»²è£ï¼Œç¡®ä¿ç»“æœçš„å”¯ä¸€æ€§ä¸å¯å¤ç°æ€§ã€‚

### 2. ResNet æ®‹å·®æŠ—é€€åŒ–è®¾è®¡ (ResNet Anti-Degradation)
é’ˆå¯¹é›†æˆå­¦ä¹ ä¸­å¼•å…¥å¼±æ¨¡å‹å¯èƒ½å¯¼è‡´æ•ˆæœä¸‹é™çš„â€œé€€åŒ–æ‚–è®ºâ€ï¼Œæˆ‘ä»¬å¤åˆ»äº† ResNet çš„æ ¸å¿ƒæ€æƒ³ï¼š

> **å…¬å¼**: $H(x) = F(x) + x$

*   **$x$ (æ’ç­‰åŸºå‡†)**: ç”± Layer 1 ç²¾è‹±æ¨¡å‹ç»“æœæ„æˆï¼Œç›¸å½“äº ResNet çš„ Shortcutï¼Œæä¾›**æ€§èƒ½ä¸‹ç•Œå…œåº•**ã€‚
*   **$F(x)$ (æ®‹å·®ä¿®æ­£)**: ç”± Layer 2 å…¨é‡æ¨¡å‹æŠ•ç¥¨æ„æˆï¼Œæ—¨åœ¨æ•æ‰é¢å¤–çš„å¢é‡ä¿¡æ¯ã€‚
*   **ä»·å€¼**: è¿™ç§è®¾è®¡èµ‹äºˆç³»ç»Ÿâ€œæ•¢äºåŠ æ·±â€çš„åº•æ°”ã€‚å³ä½¿ Layer 2 å¼•å…¥äº†å™ªå£°ï¼ŒLayer 1 çš„å­˜åœ¨ä¹Ÿèƒ½ä¿è¯æœ€ç»ˆæ•ˆæœä¸ä½äºå•ä½“ç²¾è‹±æ¨¡å‹ã€‚

### 3. å¤šæ¨¡æ€ç‰¹å¾æŒ–æ˜ (Multi-Modal Mining)
æ¨èç³»ç»Ÿçš„ä¸Šé™ç”±ç‰¹å¾å†³å®šã€‚æˆ‘ä»¬è¶…è¶Šä¼ ç»Ÿæœºå™¨å­¦ä¹ ï¼Œå¼•å…¥æ·±åº¦å­¦ä¹ ç‰¹å¾ï¼š
*   **BERT**: æå–ä¹¦ç±ç®€ä»‹ã€è¯„è®ºçš„æ·±å±‚è¯­ä¹‰ç‰¹å¾ã€‚
*   **GNN (å›¾ç¥ç»ç½‘ç»œ)**: æ„å»ºâ€œç”¨æˆ·-ä¹¦ç±â€å¼‚æ„å›¾ï¼Œåˆ©ç”¨ GAT æ•æ‰é«˜é˜¶ååŒè¿‡æ»¤ä¿¡å·ï¼Œè§£å†³å†·å¯åŠ¨é—®é¢˜ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

åœ¨ **é¡¹ç›®æ ¹ç›®å½•** ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ç”Ÿæˆæœ€ç»ˆæäº¤æ–‡ä»¶ï¼š

```bash
python FINALåŠ æƒ.py
```

*   **è¾“å‡º**: `submission.csv`
*   **æ³¨æ„**: è„šæœ¬ä¾èµ–å„å­ç›®å½•çš„ä¸­é—´äº§ç‰©ï¼Œå¦‚æœæ˜¯é¦–æ¬¡è¿è¡Œï¼Œè¯·å‚è€ƒä¸‹æ–¹çš„â€œå®Œæ•´å¤ç°â€ã€‚

---

## ğŸ“‚ ä»“åº“ç»“æ„ (Repository Layout)

```text
.
â”œâ”€â”€ ğŸ“œ FINALåŠ æƒ.py                # ğŸ”¥ Layer 2 æ ¸å¿ƒï¼šæœ€ç»ˆä»²è£ä¸åŠ æƒè„šæœ¬ -> submission.csv
â”œâ”€â”€ ğŸ“œ Top10åŠ æƒèåˆ.py            # ï¿½ï¸ Layer 1 æ ¸å¿ƒï¼šTop-10 åŸºå‡†ç”Ÿæˆ -> top10åŠ æƒè¾“å‡ºç»“æœ.csv
â”œâ”€â”€ ğŸ“œ æ•´åˆrv5åˆ°æœ€ç»ˆæŠ•ç¥¨.py         # ï¿½ è¾…åŠ©ï¼šv5 æ¨¡å‹ç»“æœæ ‡å‡†åŒ–
â”œâ”€â”€ ğŸ“‚ 23æ··æ¨/                     # ğŸ§  å­æ¨¡å‹ï¼šæ··åˆæ¨èç­–ç•¥
â”œâ”€â”€ ğŸ“‚ v5/                        # ğŸ§  å­æ¨¡å‹ï¼šv5 ç‰ˆæœ¬
â”œâ”€â”€ ğŸ“‚ dspos2/                    # ğŸ§  å­æ¨¡å‹ï¼šdspos2 ç‰ˆæœ¬
â”œâ”€â”€ ğŸ“‚ 133/                       # ğŸ§  å­æ¨¡å‹ï¼š133 ç‰ˆæœ¬
â”œâ”€â”€ ğŸ“‚ f1/                        # ğŸ§  å­æ¨¡å‹ï¼šf1 ç‰ˆæœ¬
â”œâ”€â”€ ğŸ“‚ v2/                        # ğŸ§  å­æ¨¡å‹ï¼šv2 ç‰ˆæœ¬
â”œâ”€â”€ ğŸ“‚ å†³èµ›classic_autoML/        # ğŸ§  å­æ¨¡å‹ï¼šAutoML ç­–ç•¥
â””â”€â”€ ğŸ“ ç¯å¢ƒä¾èµ–.txt                 # ğŸ“¦ ä¾èµ–è¯´æ˜
```

---

## ğŸ”„ å®Œæ•´å¤ç° (Full Reproduction)

### 1. å­æ¨¡å‹ç”Ÿæˆ (Per-model Inference)
è¿›å…¥ä»¥ä¸‹æ¯ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§å…¶å†…éƒ¨ README è¿è¡Œï¼Œç”Ÿæˆå„è‡ªçš„ CSV äº§ç‰©ï¼š
> `23æ··æ¨` / `v5` / `dspos2` / `133` / `f1` / `v2` / `å†³èµ›classic_autoML`

### 2. æ‰§è¡ŒåŒå±‚é›†æˆ (Execute Ensemble)

```bash
# Step 1: å‡†å¤‡ v5 ç»“æœ (Layer 1 é¢„å¤„ç†)
python æ•´åˆrv5åˆ°æœ€ç»ˆæŠ•ç¥¨.py

# Step 2: ç”Ÿæˆ Layer 1 åŸºå‡† (Top-10 åŠ æƒ)
# å¯¹åº”ç†è®ºä¸­çš„ "x" (Shortcut)
python Top10åŠ æƒèåˆ.py

# Step 3: æ‰§è¡Œ Layer 2 æœ€ç»ˆä»²è£ (Final Arbitration)
# å¯¹åº”ç†è®ºä¸­çš„ "H(x) = F(x) + x"
python FINALåŠ æƒ.py
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹ (Notes)

*   **æ•°æ®è·¯å¾„**: è¯·ç¡®ä¿ `1data.csv` (å¤èµ›) å’Œ `111data.csv` (å†³èµ›) æ”¾ç½®åœ¨æ­£ç¡®ä½ç½®ã€‚
*   **è¿è¡Œç›®å½•**: æ‰€æœ‰ Python è„šæœ¬å¿…é¡»åœ¨ **é¡¹ç›®æ ¹ç›®å½•** æ‰§è¡Œã€‚
*   **å¤§æ–‡ä»¶**: æ¨¡å‹æƒé‡æ–‡ä»¶ (`.pkl`, `.joblib`) æœªä¸Šä¼  Gitï¼Œå¦‚éœ€å®Œæ•´ç¦»çº¿åŒ…è¯·è”ç³» `a1992423911@dlmu.edu.cn`ã€‚

---

<p align="center">
  <i>Powered by <b>Arbitration-based Ensemble Strategy</b></i>
</p>
